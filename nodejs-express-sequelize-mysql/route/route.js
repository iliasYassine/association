let express = require('express');
let app = express()
const router = express.Router();
const auth = require('../middleware/auth');
const user = require('../model/ModelUser');

////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////

// router.get('/', (request, response) => {
//   console.log("le get marche bien ");
//   response.send('Page accoeuil')
// })
//////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////

/// connecter avec front

const path = require('path');

router.get('/', (request, response) => {
  response.sendFile(path.join(__dirname + '/../Jobboard_front-end/index.html'));
})



//////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////// USER//////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////

/// on connecte avec controller de user ///// post USER CREATE ///////
var user_controller = require('../controller/UserController');
router.post('/user/create', user_controller.user);
//,auth.verifyToken
/// get  USER////////
router.get('/user/get', user_controller.getAllUser);

//get finone userr/////////////
//router.get('/user/findOneUser', user_controller.findOneUser);
////////////update //////////////////////////////////////////////
router.put('/user/update/:id', user_controller.updateUser);

///////////////////finderpk////////////////////////////////
router.get('user/findergetpk',user_controller.FindByPK);

////////////////DELETE USER///////  /////////////

router.delete('/user/delete/:id' ,user_controller.deleteUser);

////////////////////LOGIN/////////////////////////////////////

 router.post('user/login',user_controller.login);


//////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////// ADVERTISMENTS//////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////

/// on connecte avec controller de advertisments post
var adv_controller = require('../controller/AvertismentsController');
router.post('/advertisments/create', adv_controller.advert);
router.get('/advertisments/get', adv_controller.getAllAdvertisments);

////////////////DELETE USER///////  /////////////

router.delete('/advertisments/delete/:id',adv_controller.deleteAdvertisment);
//////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////// COMPANIE//////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////

/// on connecte avec controller de companie 
var comp_controller = require('../controller/CompanieController');
router.post('/companie/create', comp_controller.companie);
/////////GET////////////////////////////
router.get('/companie/get', comp_controller.getAllcompanie);
//// DELETE //////// 
router.delete('/companie/delete/:id',comp_controller.deleteCompanie);

//////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////// JOB COMPANIE//////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////

/// on connecte avec controller de companie 
var job_companie_controller = require('../controller/job_applicationController');
router.post('/job_companie/create', job_companie_controller.job_comp);
/// get  JOB_COMPANIE////////
router.get('/job_companies/get', job_companie_controller.getAllJob_companie);

//// DELETE //////// 
router.delete('/job_companies/delete/:id',job_companie_controller.deleteJobApplication);

////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////

module.exports = router;